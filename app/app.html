<!DOCTYPE html>
<html>
<head>
    <title>XR Device Presentation Template</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://unpkg.com/ua-parser-js@1.0.37/dist/ua-parser.min.js"></script>
    <script src="https://aframe.io/releases/1.7.0/aframe.min.js"></script>
    <script>
        // Load debug script before A-Frame if debug is enabled
        if (window.location.search.includes('debug=true')) {
            const debugScript = document.createElement('script');
            debugScript.src = './core/js/debug.js';
            debugScript.onerror = function() {
                console.error('Failed to load debug script');
            };
            document.head.appendChild(debugScript);
        }
    </script>
    <script src="./core/js/components/device-detection.js"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
        }
        
        /* Styles for different device types */
        body.mobile {
            touch-action: none;
        }
        
        body.desktop {
            cursor: pointer;
        }
        
        /* VR button styling */
        #enterVRButton {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 999;
            padding: 10px 20px;
            background: rgba(0, 0, 0, 0.5);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        
        #enterVRButton:hover {
            background: rgba(0, 0, 0, 0.7);
        }
    </style>
</head>
<body>
    <a-scene device-detection>
        <!-- Environment -->
        <a-sky color="#000000"></a-sky>
        <a-plane position="0 0 -4" rotation="-90 0 0" width="4" height="4" color="#7BC8A4"></a-plane>
        
        <!-- Device Info Display -->
        <a-entity id="device-info-text" position="0 2 -1" text="value: Loading device info..."></a-entity>
        
        <!-- VR Button -->
        <a-entity id="enterVRButton" position="0 0 -1" text="value: Enter VR" visible="false"></a-entity>
        
        <!-- Camera -->
        <a-entity camera look-controls wasd-controls position="0 1.6 0"></a-entity>
        
        <!-- 3D Model -->
        <a-entity gltf-model="assets/colgateboxcomplete.glb" position="0 0.5 -4" scale="10 10 10"></a-entity>

        <!-- VR Console (only visible in debug mode) -->
        <a-entity id="vr-console" vr-console="maxLines: 20; width: 3; color: #FFF" position="3.5 2 -0.8" rotation="0 -60 0" visible="false"></a-entity>
    </a-scene>

    <script>
        // Wait for all scripts to load
        window.addEventListener('load', function() {
            // Check if UAParser is available
            if (typeof UAParser === 'undefined') {
                console.error('UAParser is not loaded!');
                return;
            }
            
            // Initialize the scene
            const scene = document.querySelector('a-scene');
            if (scene) {
                scene.addEventListener('loaded', function() {
                    console.log('A-Frame scene loaded');
                });
            }
        });
    </script>
</body>
</html>
